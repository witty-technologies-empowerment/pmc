{% include "userbase.html" %}
{% load staticfiles %}
            
              <div id="map"></div>
              <div id="infowindow-content">
                <img src="" width="18" height="18" id="place-icon">
                <span id="place-name"  class="title"></span><br>
                <span id="place-address"></span> <br>
                <a href="{% url 'users:request' %}" onclick="placeSelect()">Select Here</a>
              </div>
            <footer class="footer">
                <div class="container">
                    <nav>
                        <ul class="footer-menu">
                            <li>
                                <a style="font-family: 'Ubuntu', sans-serif;color: purple;font-size: 20px;" href="{% url 'index' %}">
                                    PassMeCash
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'index' %}">
                                    Home
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'index' %}">
                                    Company
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'index' %}">
                                    Social
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Blog
                                </a>
                            </li>
                        </ul>
                        <p class="copyright text-center">
                            Â©
                            <script>
                                document.write(new Date().getFullYear())
                            </script>
                            <a href="{% url 'index' %}">PassMeCash</a>, made to reverse the banking system
                        </p>
                    </nav>
                </div>
            </footer>
        </div>
    </div>
    <script>
      // Facebook Pixel Code Don't Delete
      !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
        n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
        document,'script','//connect.facebook.net/en_US/fbevents.js');

      try{
        fbq('init', '111649226022273');
        fbq('track', "PageView");

      }catch(err) {
        console.log('Facebook Track Error:', err);
      }
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=111649226022273&ev=PageView&noscript=1"
      />
    </noscript>
</body>
<!--   Core JS Files   -->
<script src="{% static 'dashboard/assets/js/jQuery-v3.2.1.min.js' %}" type="text/javascript"></script>
<script src="{% static 'dashboard/assets/js/popper.min.js' %}" type="text/javascript"></script>
<script src="{% static 'dashboard/assets/js/bootstrap.min.js' %}" type="text/javascript"></script>
<!--  Plugin for Switches, full documentation here: https://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="{% static 'dashboard/assets/js/bootstrap-swicth.js' %}"></script>
<!--  Google Maps Plugin    -->
<script>
      var q = '{{street}}'+', '+'{{city}}'+', '+'{{state}}'+', '+'{{country}}'
      console.log(q)


        var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://us1.locationiq.com/v1/search.php?key=pk.d727acbbe82adec8c038afc106470c2b&q="+q+"&format=json",
        "method": "GET"
      }

      $.ajax(settings).done(function (response) {
        console.log(response);
      });
      function initMap() {
      var map;
	    if ("geolocation" in navigator){
		navigator.geolocation.getCurrentPosition(function(position){ 
			var currentLatitude = position.coords.latitude;
			var currentLongitude = position.coords.longitude;
            map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: currentLatitude, lng:currentLongitude},
          zoom: 14,
          disableDefaultUI: true,
        });
        var card = document.getElementById('pac-card');
        var input = document.getElementById('pac-input');
        var types = document.getElementById('type-selector');
        var strictBounds = document.getElementById('strict-bounds-selector');

        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(card);

        var autocomplete = new google.maps.places.Autocomplete(input);

        // Bind the map's bounds (viewport) property to the autocomplete object,
        // so that the autocomplete requests use the current map bounds for the
        // bounds option in the request.
        autocomplete.bindTo('bounds', map);

        // Set the data fields to return when the user selects a place.
        autocomplete.setFields(
            ['address_components', 'geometry', 'icon', 'name']);

        var infowindow = new google.maps.InfoWindow();
        var infowindowContent = document.getElementById('infowindow-content');
        infowindow.setContent(infowindowContent);
        var marker = new google.maps.Marker({
          map: map,
          anchorPoint: new google.maps.Point(0, -29)
        });

        autocomplete.addListener('place_changed', function() {
          infowindow.close();
          marker.setVisible(false);
          var place = autocomplete.getPlace();
          if (!place.geometry) {
            // User entered the name of a Place that was not suggested and
            // pressed the Enter key, or the Place Details request failed.
            window.alert("No details available for input: '" + place.name + "'");
            return;
          }

          // If the place has a geometry, then present it on a map.
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(5);  // Why 17? Because it looks good.
          }
          marker.setPosition(place.geometry.location);
          marker.setVisible(true);
          console.log(place.address_components)
          var address = '';
          if (place.address_components) {
            address = [
              (place.address_components[0] && place.address_components[0].short_name || ''),
              (place.address_components[1] && place.address_components[1].short_name || ''),
              (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
          }

          infowindowContent.children['place-icon'].src = place.icon;
          infowindowContent.children['place-name'].textContent = place.name;
          infowindowContent.children['place-address'].textContent = address;
          infowindow.open(map, marker);
        });

        // Sets a listener on a radio button to change the filter type on Places
        // Autocomplete.
        function setupClickListener(id, types) {
          var radioButton = document.getElementById(id);
          radioButton.addEventListener('click', function() {
            autocomplete.setTypes(types);
          });
        }

        setupClickListener('changetype-all', []);
        setupClickListener('changetype-address', ['address']);
        setupClickListener('changetype-establishment', ['establishment']);
        setupClickListener('changetype-geocode', ['geocode']);

        document.getElementById('use-strict-bounds')
            .addEventListener('click', function() {
              console.log('Checkbox clicked! New state=' + this.checked);
              autocomplete.setOptions({strictBounds: this.checked});
            });
	    });
 }
}
 google.maps.event.addDomListener(window, 'load', init);
    </script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdySvSNkVmiKISuWO11H-XycaS-k0V5q8&libraries=places&callback=initMap"
async defer></script>
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdySvSNkVmiKISuWO11H-XycaS-k0V5q8&callback=initMap"
    async defer></script> -->
<!--  Chartist Plugin  -->
<script src="{% static 'dashboard/assets/js/chartist.min.js' %}"></script>
<!--  Share Plugin -->
<script src="{% static 'dashboard/assets/js/jquery.sharrre.js' %}"></script>
<!--  Notifications Plugin    -->
<script src="{% static 'dashboard/assets/js/bootstrap-notify.js' %}"></script>
<!-- Control Center for Light Bootstrap Dashboard: scripts for the example pages etc -->
<script src="{% static 'dashboard/assets/js/light-bootstrap-dashboard.js' %}" type="text/javascript"></script>
<!-- Light Bootstrap Dashboard DEMO methods, don't include it in your project! -->
<script src="{% static 'dashboard/assets/js/main.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function() {
        // Javascript method's body can be found in assets/js/main.js
        demo.initDashboardPageCharts();

        demo.showNotification();

        // demo.showLocation();

    });
</script>

</html>
